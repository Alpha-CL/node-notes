## create database

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// crerate database

//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


1) new database

    - 当创建数据库，且没有指定 字符集、字符序 时
      ( server字符集、server字符序 就会作为该数据库的默认字符集、排序规则 )


创建数据库时

    - 若指定了CHARACTER SET或COLLATE，则以对应的字符集、排序规则为准
    
    - 若没有指定字符集、排序规则，则以 character_set_server、collation_server 为准


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


2) set potions

    - Databaase Name:               // 定义了数据库名称
    
    - Character Set:                // 定义了 字符 以及 字符的编码
    
    - Collation:                    // 定义了 字符 的 比较规则


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

### character_set & collation

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


1. 一个字符集对应至少一种字符序( 一般是 一对多 )

2. 两个不同的字符集不能有相同的字符序

3. 每个字符集都有默认的字符序


//-------------------------------------------------------------------------------------------------------------------//


// 查看 mysql 字符集


SHOW CHARACTER SET;           


SHOW CHARACTER SET WHERE Charset="utf8";


SHOW CHARACTER SET LIKE "utf8%";


//-------------------------------------------------------------------------------------------------------------------//


// 查看 mysql 支持的 字符序


SHOW COLLATION


USE information_schema;
SELECT * FROM COLLATIONS WHERE CHARACTER_SET_NAME="utf8";


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### character_set

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * utf8 历史遗留问题
 * 
 * 
 * 最初的 UTF-8 格式使用一至六个字节，最大能编码 31 位字符
 * 最新的 UTF-8 规范只使用一到四个字节，最大能编码21位，正好能够表示所有的 17个 Unicode 平面
 * Mysql 中保存 4 字节长度的 UTF-8 字符，需要使用 utf8mb4 字符集
 */

utf8 是 Mysql 中的一种字符集，只支持最长三个字节的 UTF-8字符，也就是 Unicode 中的基本多文本平面

Mysql 中的字符串长度算的是字符数而非字节数，对于 CHAR 数据类型来说，需要为字符串保留足够的长
当使用 utf8 字符集时，需要保留的长度就是 utf8 最长字符长度乘以字符串长度
所以这里限制了 utf8 最大长度为 3 ( eg: CHAR(100) Mysql 会保留 300字节长度 )


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * utf8 升级 utf8mb4
 * 
 * 
 * utf8mb4 是 utf8 的超集
 * 对于 BMP字符 UTF8 和 utf8mb4 具有相同的存储特性：相同的代码值，相同的编码，相同的长度
 */


// UTF-8 字符集

每个字符最多使用三个字节，并且只包含基本多语言面 (Basic Multilingual Plane,BMP)字符


// utf8mb4 字符集

使用最多每字符四个字节支持补充字符，支持 emiji


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### Collation

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * [character_set]_[type]_[mod]
 * 
 * 
 * @type: 
 *      - general: 是用古板的 unicode 数字比较，性能高
 *      - unicode: 能处理一些 "变体" 的比较 ( eg: 在德语和一些其它语言中 'ß' == 'ss' )
 *      - ...
 * 
 * @mod: 
 *      - _ci: 表示大小写不敏感 
 *      - _cs: 表示大小写敏感 
 *      - _bin: 表示用编码值进行比较
 *      - ...
 */

utf8_unicode_ci 比较准确，utf8_general_ci速度比较快
( 常情况下使用 utf8_general_ci )


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


utf8

    - utf8_unicode_ci               // 比较准确
    
    - utf8_general_ci               // default 速度比较快

utf8mb4

    - utf8mb4_general_ci            // 比较准确
    
    - utf8mb4_unicode_ci            // default 速度比较快


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```